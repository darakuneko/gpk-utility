# GPK Utility
![Image](https://github.com/user-attachments/assets/706d0026-5f85-492e-bf3a-8cf3270cd40f)

[README (English)](./README.md)

**GPK Utility**は、トラックパッドおよびキーボードのための設定ユーティリティです。<br>
デバイスに応じたカスタマイズ機能を提供します。<br>
本アプリケーションは、アクティブウィンドウの状態を常時監視し、レイヤー切り替え機能を提供するため、ウィンドウを閉じた後もタスクトレイ（またはシステムトレイ）に常駐します。<br>
なお、機能を利用しない場合には、メニュー設定により「ウィンドウを閉じた際にアプリケーションを終了する」動作への切り替えも可能です。

#### ご注意
GPK Utilityを起動する前にVialなどデバイスと通信するアプリケーションを起動しないでください。<br>
同時に立ち上げデバイスが認識しない場合は、アプリケーションを全て終了し、デバイスを接続し直してから、GPK Utilityを起動してください。
トラックパッドの設定項目によっては、設定内容によりデバイスの動作に支障をきたす場合があります。<br>
設定変更の際は十分にご確認のうえ慎重に操作してください。<br>
万が一、動作に問題が生じた場合は、Vial Userタブにある「EEPROM Clear」ボタンを設定し押すことで、デバイス設定を初期化することが可能です。<br>
![Image](https://github.com/user-attachments/assets/b9a13791-89b5-4eea-942b-cd967c2d444d)


## 機能タブ

### 共通

#### Layer
各レイヤー（モード）の設定を管理します。<br>異なる操作モードを切り替えて使用することができます。

- **トラックパッドレイヤー**: トラックパッドを触れている間は専用のレイヤーへ移動する
- **レイヤー変更時の触覚フィードバック**: レイヤー変更時の触覚フィードバックの有効/無効とパターン設定 (Hapticセクションを参照)
- **自動レイヤー切り替え**: アプリケーションごとに自動的にレイヤーを切り替える設定
  - 特定のアプリケーションがアクティブになったときに指定したレイヤーに自動的に切り替わる
- **登録方法**: 設定したいアプリケーションをアクティブにするとセレクトリストに登録されます<br>リストに登録されるアプリケーションは最新の10件のみです<br>アプリケーションを起動し直すと初期化されます  
https://github.com/user-attachments/assets/ba6a7bcf-7245-4bfc-9b17-367660a74c7d

#### Haptic
触覚フィードバックの設定を管理します。
- **レイヤー変更時の触覚フィードバック**: レイヤー変更時の触覚フィードバックの有効/無効を設定します。
- **触覚フィードバックパターン**: レイヤー変更時の触覚フィードバックのパターンを選択します。

### トラックパッド向け機能

#### Mouse
マウスの動作速度の動作をカスタマイズします。

- **速度**: ポインタの移動速度を0.1から5.0の範囲で調整（値が大きいほど速い）

#### Scroll
スクロールの速度、方向の設定を調整します。<br>スムーズなスクロールや方向反転などを設定できます。

- **方向反転**: スクロール方向を反転する設定（標準/反転）
- **ショートスクロール**: 短いスクロール操作で多量スクロールの有効/無効にする設定
- **スクロール間隔(Scroll Term)**: スクロールコマンドを発行する間隔を0-300msの範囲で調整
- **スクロールステップ**: 1回のスクロールで移動する行数を1-16行の間で調整
- **ショートスクロール時間(Short Scroll Term)**: ショートスクロールが有効になるまでの時間を0-500msの範囲で調整

#### Drag & Drop
ドラッグアンドドロップの挙動を設定します。

- **Drag & Drop**: ドラッグ＆ドロップ機能の有効/無効
- **モード**: ドラッグモードの選択
  - Term: 時間ベースのドラッグ制御
  - Strength: 強度ベースのドラッグ制御
- **持続時間(Term)**: ドラッグ状態になるまでの時間を0-1000msの範囲で調整
- **強度(Strength)**: ドラッグ状態になるまでの強さを1-12の範囲で調整

#### Timer
ポモドーロタイマーの時間管理機能を設定します。<br>
作業時間と休憩時間の調整が可能です。<br>
[Image](https://github.com/user-attachments/assets/bc964f72-80b5-40a8-9988-5310a1126fa4)<br>
デバイスの起動時はオフになっているので、Pomodoro Toggleを押してタイマーがスタートさせます。<br>

- **作業時間**: ポモドーロタイマーの作業時間を1-60分の範囲で設定
- **休憩時間**: 短い休憩時間を1-30分の範囲で設定
- **長い休憩時間**: 長い休憩時間を1-60分の範囲で設定
- **作業インターバル数**: 長い休憩が始まるまでの作業/休憩サイクル数を1-10の範囲で設定
- **ポモドーロサイクル数**: 作業インターバル数を繰り返す回数を1-10の範囲で設定
- **触覚フィードバック**: 作業開始、休憩開始時の触覚フィードバックパターンを設定
- **連続モード**: 手動介入なしに次のセッション（作業/休憩）を自動的に開始します。
- **デスクトップ通知**: ポモドーロのフェーズ変更時にデスクトップ通知を有効/無効にします。<br>
GPK Utilityがアクティブでない時に通知されます。
- **ハプティック通知**: ポモドーロのフェーズ変更時に触覚通知を有効/無効にします。

#### Gesture
トラックパッドのジェスチャー設定を構成します。
- **タップ時間(Tap Term)**: 次のタップが使用できるまでの間隔（0-500ms）
- **スワイプ時間(Swipe Term)**: 次のスワイプが使用できるまでの間隔（0-500ms）
- **ピンチ時間(Pinch Term)**: 次のピンチジェスチャーが使用できるまでの間隔（0-500ms）
- **ピンチ距離(Pinch Distance)**: 次のピンチジェスチャーが使用できるまでの間隔（0-500）
- **ジェスチャー時間(Gesture Term)**: 次のジェスチャーが使用できるまでの間隔（0-500ms）

### キーボード向け機能

#### OLED
キーボードのOLEDディスプレイ用の表示設定

- **時刻表示**: OLEDディスプレイの最後の一行に現在時刻を表示します

### アプリケーション設定

- **言語**: アプリケーションの言語を変更
- **設定のインポート/エクスポート**: すべてのデバイス・アプリ設定をファイルでインポート/エクスポート
- **システムトレイ**: 閉じた時にトレイに最小化、起動時にトレイに最小化して開始
- **デバイスポーリング間隔**: デバイス状態の取得間隔を調整（200-2000ms）
- **アップデート**: 最新の10件のアップデート情報

## 使用方法

1. 対応するGPKデバイスをPCに接続します
2. GPK Utilityを起動します
3. 上部タブからデバイスを選択します
4. 左側のメニューから設定したい機能を選択します
5. 各設定を調整し、デバイスに適用します

## 対応デバイス
https://github.com/darakuneko/vial-qmk/tree/gpk-utility

ご自身のVialキーボードを対応させたい場合はgpk-utilityブランチを使用して、rules.mkにGPKRC_ENABLE = yes
を必ず追加してください

rules.mk<br>
GPKRC_ENABLE = yes

### 定義
Device: 
https://github.com/darakuneko/vial-qmk/blob/gpk-utility/quantum/gpk_rc.h
Application:
https://github.com/darakuneko/gpk-utility/blob/main/gpkrc.js

### 作例:
keyboard(Auto Layer Switch/OLED): [gpk60_47gr1re_vial](https://github.com/darakuneko/keyboard/tree/main/qmk/gpk60_47gr1re_vial)<br>
trakpad: [numnum bento](https://github.com/darakuneko/keyboard/tree/main/qmk/numnum_bento)

**仕様は予告なく変更されます**